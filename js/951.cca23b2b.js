"use strict";(self["webpackChunkVietFarm"]=self["webpackChunkVietFarm"]||[]).push([[951],{6790:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(3396),l=a(7139);const r={class:"sub-heading"};function s(e,t,a,s,o,u){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("h2",null,(0,l.zw)(a.heading),1),(0,n._)("p",null,(0,l.zw)(a.subHeading),1)])}var o={name:"SubHeader",props:{heading:String,subHeading:String}},u=a(89);const i=(0,u.Z)(o,[["render",s],["__scopeId","data-v-1da2b643"]]);var d=i},1042:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(3396);const l={class:"lds-ring"},r=(0,n._)("div",null,null,-1),s=(0,n._)("div",null,null,-1),o=(0,n._)("div",null,null,-1),u=(0,n._)("div",null,null,-1),i=[r,s,o,u];function d(e,t,a,r,s,o){return(0,n.wg)(),(0,n.iD)("div",l,i)}var c={},p=a(89);const m=(0,p.Z)(c,[["render",d]]);var h=m},1951:function(e,t,a){a.r(t),a.d(t,{default:function(){return ie}});var n=a(3396),l=a(9242),r=a(7139);const s=e=>((0,n.dD)("data-v-57a89f10"),e=e(),(0,n.Cn)(),e),o={class:"container"},u={class:"coupon"},i=s((()=>(0,n._)("input",{type:"text",placeholder:"Enter your coupon code"},null,-1))),d=(0,n.Uk)("Apply"),c={class:"form"},p=(0,n.uE)('<h4 data-v-57a89f10>Billing Address</h4><div class="form-group" data-v-57a89f10><div class="form-control" data-v-57a89f10><label data-v-57a89f10>First Name *</label><input type="text" required data-v-57a89f10></div><div class="form-control" data-v-57a89f10><label data-v-57a89f10>Last Name *</label><input type="text" required data-v-57a89f10></div></div><div class="form-control" data-v-57a89f10><label data-v-57a89f10>Country *</label><input type="text" required data-v-57a89f10></div>',3),m={class:"form-control"},h=s((()=>(0,n._)("label",null,"Street Address*",-1))),f={class:"form-group"},y=s((()=>(0,n._)("div",{class:"form-control"},[(0,n._)("label",null,"Town / City *"),(0,n._)("input",{type:"text",required:""})],-1))),_={class:"form-control"},b=s((()=>(0,n._)("label",null,"State / County *",-1))),v=s((()=>(0,n._)("div",{class:"form-control"},[(0,n._)("label",null,"Email Address *"),(0,n._)("input",{type:"email",required:""})],-1))),w=s((()=>(0,n._)("div",{class:"form-control"},[(0,n._)("label",null,"Order notes (optional) "),(0,n._)("textarea",{rows:"10",placeholder:"Notes about your order, e.g. special notes for delivery"})],-1))),g=s((()=>(0,n._)("h4",null,"Your Order",-1))),k={class:"table table-summary"},S=s((()=>(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Product"),(0,n._)("th",null,"Total (NGN)")])],-1))),C=(0,n.Uk)(),M=s((()=>(0,n._)("br",null,null,-1))),q=s((()=>(0,n._)("br",null,null,-1))),x={class:"summary-subtotal"},P=s((()=>(0,n._)("td",null,"Subtotal (NGN):",-1))),z=s((()=>(0,n._)("tr",null,[(0,n._)("td",null,"Shipping:"),(0,n._)("td",null,"Free shipping")],-1))),A={class:"summary-total"},O=s((()=>(0,n._)("td",null,"Total (NGN):",-1))),Z=s((()=>(0,n._)("span",null,"Place Order",-1))),N=s((()=>(0,n._)("div",{class:"icon"},[(0,n._)("i",{class:"fa fa-credit-card"})],-1)));function D(e,t,a,s,D,H){const F=(0,n.up)("main-header"),W=(0,n.up)("sub-header"),T=(0,n.up)("action-button"),L=(0,n.up)("button-preloader"),U=(0,n.up)("success-modal"),j=(0,n.up)("main-footer");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(F),(0,n.Wm)(W,{heading:"Checkout",subHeading:"Complete your order by filling the form below"}),(0,n._)("section",null,[(0,n._)("div",o,[(0,n._)("div",u,[i,(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[d])),_:1})]),(0,n._)("form",{class:"billing-info",onSubmit:t[2]||(t[2]=(0,l.iM)(((...e)=>H.placeOrder&&H.placeOrder(...e)),["prevent"]))},[(0,n._)("div",c,[p,(0,n._)("div",m,[h,(0,n.wy)((0,n._)("input",{type:"text",placeholder:"House number and Street number",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>D.userAddress=e)},null,512),[[l.nr,D.userAddress]])]),(0,n._)("div",f,[y,(0,n._)("div",_,[b,(0,n.wy)((0,n._)("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>D.userState=e)},null,512),[[l.nr,D.userState]])])]),v,w]),(0,n._)("aside",null,[g,(0,n._)("table",k,[S,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cart,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",null,[(0,n._)("span",null,(0,r.zw)(e.name),1),C,M,(0,n.Uk)(" Size: "+(0,r.zw)(e.size)+" ",1),q,(0,n.Uk)(" Qty: "+(0,r.zw)(e.quantity),1)]),(0,n._)("td",null,(0,r.zw)(e.price.toFixed(2)),1)])))),128)),(0,n._)("tr",x,[P,(0,n._)("td",null,(0,r.zw)(e.subtotal.toFixed(2)),1)]),z,(0,n._)("tr",A,[O,(0,n._)("td",null,(0,r.zw)(e.subtotal.toFixed(2)),1)])])]),(0,n._)("button",{class:(0,r.C_)(["submit",{payment:!D.noOrder}])},[D.noOrder?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[Z,N],64)):((0,n.wg)(),(0,n.j4)(L,{key:1}))],2)])],32)])]),D.showModal?((0,n.wg)(),(0,n.j4)(U,{key:0,onCloseModal:H.closeModal,price:D.price,email:this.user.email,reference:D.referenceMessage},null,8,["onCloseModal","price","email","reference"])):(0,n.kq)("",!0),(0,n.Wm)(j)],64)}var H=a(5076),F=a(6917),W=a(1042),T=a(6790),L=a(664);const U=e=>((0,n.dD)("data-v-4ae51a74"),e=e(),(0,n.Cn)(),e),j={key:0,class:"modal-wrapper"},V={class:"modal-container"},Y={class:"modal-header"},B=U((()=>(0,n._)("h3",null,"Success",-1))),K=U((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,n._)("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"})],-1))),$=[K],E={class:"modal-body"},G={class:"modal-footer"};function I(e,t,a,s,o,u){const i=(0,n.up)("paystack");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(l.uT,{name:"fade",appear:""},{default:(0,n.w5)((()=>[o.showModal?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"modal-overlay",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(l.uT,{name:"slide",appear:""},{default:(0,n.w5)((()=>[o.showModal?((0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",V,[(0,n._)("div",Y,[B,(0,n._)("button",{class:"close",onClick:t[1]||(t[1]=t=>e.$emit("close-modal"))},$)]),(0,n._)("div",E,[(0,n._)("p",null," Your order: #"+(0,r.zw)(a.reference)+" has been placed successfully. ",1)]),(0,n._)("div",G,[(0,n.Wm)(i,{buttonClass:"paystack-button",buttonText:"Pay Online",publicKey:o.key,email:a.email,amount:o.amount,reference:a.reference,onSuccess:u.onSuccessfulPayment,onCanel:u.onCancelledPayment},{default:(0,n.w5)((()=>[(0,n.Uk)(" Pay N"+(0,r.zw)(a.price),1)])),_:1},8,["publicKey","email","amount","reference","onSuccess","onCanel"])])])])):(0,n.kq)("",!0)])),_:1})],64)}var Q=(0,n.aZ)({name:"Vue3Paystack",props:{buttonClass:{type:String,default:""},buttonText:{type:String,default:""},publicKey:{type:String,requird:!0},email:{type:String,required:!0},amount:{type:Number,required:!0},reference:{type:String,required:!0},currency:{type:String,default:"NGN"},onSuccess:{type:Function,default:function(e){console.log(e)}},onCancel:{type:Function,default:function(){console.log("payment closed")}},channels:{type:Array,default:function(){return["card","bank","ussd","qr","mobile_money"]}},metadata:{type:Object,default:function(){return{}}},label:{type:String,default:""}},async created(){this.mountScript().then((()=>{this.hasScriptLoaded=!0}))},data(){return{hasScriptLoaded:!1}},methods:{async mountScript(){return new Promise(((e,t)=>{const a=document.createElement("script");a.setAttribute("src","https://js.paystack.co/v2/inline.js"),a.setAttribute("type","text/javascript"),document.head.appendChild(a),a.onload=()=>e(),a.onerror=()=>t()}))},payWithPaystack(){const e={key:this.publicKey,email:this.email,amount:this.amount,reference:this.reference,currency:this.currency,channels:this.channels,metadata:this.metadata,label:this.label,onSuccess:e=>{this.onSuccess(e)},onCanel:()=>{this.onCanel()}},t=new window.PaystackPop;t.newTransaction(e)}}});const J=["disabled"];function R(e,t,a,l,s,o){return(0,n.wg)(),(0,n.iD)("button",{disabled:!e.hasScriptLoaded,class:(0,r.C_)(e.buttonClass),onClick:t[0]||(t[0]=(...t)=>e.payWithPaystack&&e.payWithPaystack(...t))},[(0,n._)("span",null,(0,r.zw)(e.buttonText),1)],10,J)}Q.render=R;var X=(()=>{const e=Q;return e.install=t=>{t.component("Vue3Paystack",e)},e})(),ee=a(65),te={props:["reference","price","email"],components:{ActionButton:L.Z,paystack:X},data(){return{key:"pk_test_ec28501e234f6e2d802dc2a156c2511abd2d0527",amount:100*this.price,ref:this.reference,showModal:!1}},methods:{...(0,ee.nv)(["clear_cart"]),onSuccessfulPayment:function(e){this.clear_cart(),this.$router.push("/cart")},onCancelledPayment:function(){this.$router.push("/cart")}},emits:["close-modal"],mounted(){this.showModal=!0}},ae=a(89);const ne=(0,ae.Z)(te,[["render",I],["__scopeId","data-v-4ae51a74"]]);var le=ne,re=a(6265),se=a.n(re),oe={data(){return{noOrder:!0,userState:"",userAddress:"",referenceMessage:"",price:"",showModal:!1,email:""}},components:{MainHeader:H.Z,MainFooter:F.Z,ButtonPreloader:W.Z,SubHeader:T.Z,ActionButton:L.Z,SuccessModal:le},computed:{...(0,ee.rn)(["user","cart"]),...(0,ee.Se)(["subtotal"])},methods:{async placeOrder(){this.noOrder=!1,await se().post("https://gorana.onrender.com/orders/",{orders:this.cart.map((e=>({product_id:e._id,quantity:e.quantity,size:e.size}))),state:this.userState,address:this.userAddress},{headers:{Authorization:`${this.user.token}`}}).then((e=>{this.referenceMessage=e.data.transaction_reference,this.price=e.data.price,this.noOrder=!0,this.showModal=!0})).catch((e=>{this.noOrder=!0,console.log(e)}))},closeModal(){this.showModal=!1}}};const ue=(0,ae.Z)(oe,[["render",D],["__scopeId","data-v-57a89f10"]]);var ie=ue}}]);
//# sourceMappingURL=951.cca23b2b.js.map